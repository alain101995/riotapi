<!DOCTYPE html>

<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>

<body>

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">iTexico</a>
      </div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Page 1</a></li>
        <li><a href="#">Page 2</a></li>
        <li><a href="#">Page 3</a></li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <div class="jumbotron">
      <h1>Hello</h1>
      <p> ... </p>
      <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>
    </div>
  </div>

  <div class="container">

    <div class="row">
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control" id="summoner" value="59627" placeholder="Summoner ID">
        </div>
        <button type="button" id="search" class="btn btn-default">Search</button><br />
      </form>

      <div class="btn-group" data-toggle="buttons">
        <label class="btn btn-primary active">
          <input type="radio" name="options" id="champmasterie" autocomplete="off" checked> Champion Mastery
        </label>
        <label class="btn btn-primary">
          <input type="radio" name="options" id="playerLeague" autocomplete="off">Player's League
        </label>
        <label class="btn btn-primary">
          <input type="radio" name="options" id="runes" autocomplete="off">  Runes
        </label>
        <label class="btn btn-primary">
          <input type="radio" name="options" id="masteries" autocomplete="off">  Masteries
        </label>
      </div>
    </div>

    <table id="request" class="table table-bordered">
      <thead>
        <tr>
          <th> Data 1</th>
          <th> Data 2</th>
        </tr>
      </thead>
      <tbody id="result">
      </tbody>
    </table>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script>
    var summoner = document.getElementById('summoner');
    var sumid
    $.ajax({
      type: "POST",
      url: 'http://127.0.0.1:3000/playerid/' + summoner.value,
      dataType: "text",
      async: false
      success: function(data) {
        sumid = data;
      }
    })


    $('#search').click(function() {
      if ($('#champmasterie').is(':checked')) {
        $("#result").empty();
        $.ajax({
          url: 'http://127.0.0.1:3000/champm/' + summoner.value, //+summoner
          //dataType: "json",
          cache: false,
          //timeout: 5000,
          method: 'get',
          success: function(data) {
            //  $("#test").append(JSON.stringify(data));
            var tr;
            for (var i = 0; i < data.length; i++) {
              tr = $('<tr/>');
              tr.append("<td>" + data[i].championId + "</td>");
              tr.append("<td>" + data[i].championPoints + "</td>");
              $('#result').append(tr);
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            alert('error ' + textStatus + " " + errorThrown);
          }
        });
      }
    })

    $('#search').click(function() {
      if ($('#playerLeague').is(':checked')) {
        $("#result").empty();
        $.ajax({
          url: 'http://127.0.0.1:3000/league/' + summoner.value, //+summoner
          //dataType: "json",
          cache: false,
          //timeout: 5000,
          method: 'get',
          success: function(data) {
            //  $("#test").append(JSON.stringify(data));
            var tr;
            for (var i = 0; i < data.length; i++) {
              tr = $('<tr/>');
              tr.append("<td>" + data[i].name + "</td>");
              tr.append("<td>" + data[i].tier + "</td>");
              $('#result').append(tr);
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            alert('error ' + textStatus + " " + errorThrown);
          }
        });
      }
    })

    $('#search').click(function() {
      if ($('#runes').is(':checked')) {
        $("#result").empty();
        $.ajax({
          url: 'http://127.0.0.1:3000/runes/' + summoner.value, //+summoner
          //dataType: "json",
          cache: false,
          //timeout: 5000,
          method: 'get',
          success: function(data) {
            //  $("#test").append(JSON.stringify(data));
            var tr;
            for (var i = 0; i < data.length; i++) {
              tr = $('<tr/>');
              tr.append("<td>" + data[i].championId + "</td>");
              tr.append("<td>" + data[i].championPoints + "</td>");
              $('#result').append(tr);
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            alert('error ' + textStatus + " " + errorThrown);
          }
        });
      }
    })

    $('#search').click(function() {
      if ($('#masteries').is(':checked')) {
        $("#result").empty();
        $.ajax({
          url: 'http://127.0.0.1:3000/masteries/' + summoner.value, //+summoner
          //dataType: "json",
          cache: false,
          //timeout: 5000,
          method: 'get',
          success: function(data) {
            //  $("#test").append(JSON.stringify(data));
            var tr;
            for (var i = 0; i < data.length; i++) {
              tr = $('<tr/>');
              tr.append("<td>" + data[i].pages.masteries.id + "</td>");
              tr.append("<td>" + data[i].pages.masteries.name + "</td>");
              $('#result').append(tr);
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            alert('error ' + textStatus + " " + errorThrown);
          }
        });
      }
    })
  </script>

</body>

</html>
